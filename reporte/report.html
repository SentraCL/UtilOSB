<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SEnTRA</title>
    <link href="css/singlePageTemplate.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="result.json"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n2:default.js" type="text/javascript"></script>
</head>

<body>
    <!-- Main Container -->
    <div class="container">
        <!-- Navigation -->
        <header>
            <img src="./images/logos sentra/sentra service &amp; tecnology.png" height="47" width="170">

            <nav>
                <h2 class="hero_header">SEnTRA <span class="light"> Inspección de Código</span></h2>

            </nav>
        </header>
        <!-- Hero Section -->
        <section>

            <p class="tagline">
                Cliente : Banco de Chile
                <br> Nombre de Iniciativa : Servicio de Análisis de Código
                <br> Jefe de Proyecto : 
                <br> Fecha : 08/07/2019
            </p>
        </section>
        <section>
            <h2 class="hero_header">Resumen <span class="light">Ejecutivo</span></h2>
            <p class="tagline">
                El siguiente documento contiene el resultado del análisis de código generado por la infraestructura genérica de SEnTRA de DevSecOps que involucra aspectos de seguridad asociados a una plataforma de Integracion y despliegue continuo. De acuerdo a la realidad del cliente actual se incorporan reglas asociadas a los estándares del cliente y se realiza un “tailoring” de la infraestructura/arquitectura montada para satisfacer los requisitos del cliente a nivel de estándares, normativas y aspectos de calidad y seguridad buscados.
            </p>
        </section>

        <!-- About Section -->
        <section>
            <br>

            <h2 class="hero_header">1. Resumen de Producto <span class="light">y Criterio de Reglas Aplicadas</span></h2>

            <p class="tagline">
                Componente : ISL001-DIA-PL01-182
                <br> Proveedor del código : Banco Chile
                <br> Lenguaje : OSB
                <br> Resultado del Análisis : Aprobado con Observaciones
            </p>
            <br>
            <div id="mandamientos">

            </div>
        </section>
        <section>
            <h2 class="hero_header">2. Detalle de Artefactos Asociados a los Productos <span class="light"> y/o Componentes</span></h2>
            <p class="tagline">
                A continuación, se describe los componentes analizados, para los cuales se realizado una análisis Manual y automatizado
            </p>
        </section>

        <!-- Stats Gallery Section -->
        <div class="gallery">
            <h2 class="tagline">2.1. Lista de Artefactos</h2>

            <table id="tblArtectos">
                <tr>
                    <th>Artefactos</th>
                </tr>

            </table>
        </div>
		<br/>		<br/>
        <br/>		<br/>
        <span id="detalle">

        </span>
		<br/>
		<br/>
		<br/>
        <!-- Copyrights Section -->
        <div class="copyright">&copy;2019 - <strong>SENTRA</strong></div>
    </div>
    <!-- Main Container Ends -->
    <script>

        function infoPlease(id){
            var description = "";
            rulesInfo.forEach(rule => {
                if (rule.id==id){
                    description = rule.info;
                }
            });
            return description
        }
        var tableRules = "<table >"
            tableRules+=`<tr><th>Regla ID</th><th>Descripción</th><th>Extención</th></tr>`
            rulesInfo.forEach(rule => {
                tableRules+=`<tr><td>${rule.id}</td><td><small>${rule.info}</small></td><td>${rule.ext}</td></tr>`
            });
        tableRules += "</table><br/>"
        
        document.getElementById("mandamientos").innerHTML += tableRules;

        for (var xsd in data) {
			console.log(xsd);
			document.getElementById("tblArtectos").innerHTML += "<tr><td><a href='#" +xsd + "'> " + xsd + " (" + Object.keys(data[xsd]).length + ")</a></td></tr>"
			var indice = 1;
			var spanDetail = "<hr><h2 id='" + xsd + "'>" + xsd + "</h2>"
			var reglas = "<table >"
            reglas += `<tr><th><strong>Regla</strong></th><th>Resultado</th></tr>`			
			for (var rule in data[xsd]) {
				console.log(JSON.stringify(rule));
				var id = data[xsd][rule].rule
				var status = data[xsd][rule].status
                var defRules = infoPlease(id);
				reglas += `<tr><td><strong title="${defRules}">${id}</strong></td><td><span style="color:${status=='OK'?"green":"red"}">${status}</span></td></tr>`									
            }
			reglas += "</table>"
			spanDetail += reglas + "</small>"
            spanDetail += "</span>"
			
            document.getElementById("detalle").innerHTML += spanDetail;
			
        }
    </script>
</body>

</html>